# - Config file for the SystemC package
# It defines the following variables
#  SystemC_DEFINITIONS  - required preprocessor definitions to use SystemC
#  SystemC_INCLUDE_DIRS - include directories for SystemC
#  SystemC_LIBRARIES    - libraries to link against
#  SystemC_TARGET_ARCH  - Target architecture according to the Accellera SystemC conventions

# SystemC requires Pthreads under certain conditions
if (@CMAKE_USE_PTHREADS_INIT@)
  set (CMAKE_THREAD_PREFER_PTHREAD)
  find_package (Threads REQUIRED)
  if (NOT CMAKE_USE_PTHREADS_INIT)
    message (SEND_ERROR "Failed to find the Pthreads library required to implement the SystemC coroutines and async_request_update() of primitive channels on Unix.")
  endif (NOT CMAKE_USE_PTHREADS_INIT)
endif (@CMAKE_USE_PTHREADS_INIT@)

set (SystemC_TARGET_ARCH @SystemC_TARGET_ARCH@)

# Preprocessor definitions
# set (SystemC_DEFINITIONS "-DSC_INCLUDE_FX")

# if (@DISABLE_VIRTUAL_BIND@)
#   list (APPEND SystemC_DEFINITIONS "-DSC_DISABLE_VIRTUAL_BIND")
# endif (@DISABLE_VIRTUAL_BIND@)

if (@ENABLE_IMMEDIATE_SELF_NOTIFICATIONS@)
  list (APPEND SystemC_DEFINITIONS "-DSC_ENABLE_IMMEDIATE_SELF_NOTIFICATIONS")
endif (@ENABLE_IMMEDIATE_SELF_NOTIFICATIONS@)

# Compute paths
get_filename_component (SystemC_CMAKE_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)
set (SystemC_INCLUDE_DIRS "@CONF_INCLUDE_DIRS@")

# Our library dependencies (contains definitions for IMPORTED targets)
if (NOT TARGET systemc AND NOT SystemC_LIBRARY_DIR)
  include ("${SystemC_CMAKE_DIR}/SystemCTargets.cmake")
endif (NOT TARGET systemc AND NOT SystemC_LIBRARY_DIR)

# systemc is an IMPORTED target created by SystemCTargets.cmake
set (SystemC_LIBRARIES systemc ${CMAKE_THREAD_LIBS_INIT})
